# ==============================================================================
# BACKTEST COMPONENT - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control (it contains sensitive credentials)
# DO commit .env.example as a template for other developers
#
# This configuration is specifically for the backtest component.
# Variables are organized by purpose for clarity.
# ==============================================================================

# ------------------------------------------------------------------------------
# Google Cloud Platform (GCP) Authentication
# ------------------------------------------------------------------------------
# Required for all GCS operations (reading data, uploading results)

# GCP Project ID
GCP_PROJECT_ID=your-gcp-project-id

# Path to GCP service account JSON key file
# This file must exist and contain valid credentials for GCS access
GOOGLE_APPLICATION_CREDENTIALS=.secrets/gcs/gcs-service-account.json


# ------------------------------------------------------------------------------
# Input Data Storage (Market Data)
# ------------------------------------------------------------------------------
# Configuration for reading raw market data (trades, book snapshots) from GCS

# GCS bucket containing raw market data Parquet files
# Used by: backend/data/loader.py (UCSDataLoader)
UNIFIED_CLOUD_SERVICES_GCS_BUCKET=your-market-data-bucket

# Local path for data when using FUSE mount or local filesystem
# Used when: UNIFIED_CLOUD_SERVICES_USE_DIRECT_GCS=false (FUSE mode)
# Default: /app/data_downloads (Docker) or ./data_downloads (local)
UNIFIED_CLOUD_LOCAL_PATH=/app/data_downloads

# Use direct GCS API access instead of FUSE mount
# Set to 'true' to use GCS API directly (recommended for cloud deployments)
# Set to 'false' to use FUSE mount or local filesystem
# Used by: backend/data/loader.py, backend/config/loader.py
UNIFIED_CLOUD_SERVICES_USE_DIRECT_GCS=true

# Use Parquet format for data (always true for this system)
UNIFIED_CLOUD_SERVICES_USE_PARQUET=true


# ------------------------------------------------------------------------------
# Backtest Catalog Storage (NautilusTrader Catalog)
# ------------------------------------------------------------------------------
# Configuration for storing converted Parquet data in NautilusTrader catalog format
# The catalog is where converted data is stored for fast backtest execution

# Path to catalog root directory
# Local path: /app/backend/data/parquet (Docker) or backend/data/parquet (local)
# GCS path: gcs://bucket-name/path/to/catalog/ (for cloud storage)
# Used by: backend/core/engine.py, backend/catalog_manager.py, backend/data/catalog.py
DATA_CATALOG_PATH=/app/backend/data/parquet


# ------------------------------------------------------------------------------
# Backtest Results Storage (Output)
# ------------------------------------------------------------------------------
# Configuration for uploading backtest results to GCS

# GCS bucket for storing backtest results (output)
# Used by: backend/results/serializer.py, backend/scripts/utils/upload_backtest_results_to_gcs.py
# Results are uploaded to: gs://{EXECUTION_STORE_GCS_BUCKET}/fast/ and gs://{EXECUTION_STORE_GCS_BUCKET}/report/
EXECUTION_STORE_GCS_BUCKET=your-execution-store-bucket


# ------------------------------------------------------------------------------
# GCS FUSE Mount Configuration (Optional)
# ------------------------------------------------------------------------------
# Configuration for mounting GCS buckets as local filesystem (alternative to direct GCS API)

# Enable GCS FUSE mounting
# Set to 'true' to mount GCS bucket as local filesystem
# Set to 'false' to use direct GCS API (recommended)
# Used by: backend/api/mount_status.py, backend/scripts/mount_gcs.sh
USE_GCS_FUSE=false

# GCS bucket name for FUSE mounting (if USE_GCS_FUSE=true)
# Typically same as UNIFIED_CLOUD_SERVICES_GCS_BUCKET for input data
# Used by: backend/api/mount_status.py, backend/scripts/mount_gcs.sh
GCS_FUSE_BUCKET=

# GCS Service Account Key for FUSE mounting (if different from GOOGLE_APPLICATION_CREDENTIALS)
# Usually not needed - uses GOOGLE_APPLICATION_CREDENTIALS by default
GCS_SERVICE_ACCOUNT_KEY=
